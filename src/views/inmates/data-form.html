<template>
	<require from="./date-format"></require>

	<script language="JavaScript">
		window.onbeforeunload = confirmExit;
    function confirmExit() {
        return "You have attempted to leave this page. Are you sure?";
    }
	</script>
	<require from="./flex.css"></require>
	<section class="full-height flex-column-1 au-animate ignore">
		<div class="flex-row-none section-header">
			${heading} Add-
		</div>
		<div class="flex-column-1 overflow-y-auto">
			<form ref="inmate" class="flex-column-1">

				<div class="flex-row-none">
					<div class="form-group flex-column-1">
						<div class="Rtable Rtable--2cols">
							<div class="Rtable-cell-30 Rtable-cell--green">
								<strong> id ${appService.currentRecord.id} ${appService.currentRecord.inmate.lastname} ${currentRecord.inmate.lastname}</strong>
							</div>
							<div class="Rtable-cell-70 Rtable-cell--green">
								<input type="text" id="id" class="form-control input-sm" value.bind="appService.currentRecord.id">
							</div>
							<div class="Rtable-cell-30 Rtable-cell--green">
								<strong> inmate.lastname</strong>
							</div>
							<div class="Rtable-cell-70 Rtable-cell--green">
								<input type="text" id="id" class="form-control input-sm" value.bind="appService.currentRecord.inmate.lastname">
							</div>

							<div class="Rtable-cell-30 Rtable-cell--green">
								<strong> inmate.firstname</strong>
							</div>
							<div class="Rtable-cell-70 Rtable-cell--green">
								<input type="text" id="id" class="form-control input-sm" value.bind="appService.currentRecord.inmate.firstname">
							</div>

							<div class="Rtable-cell-30 Rtable-cell--green">
								<strong> inmate.gender</strong>
							</div>
							<div class="Rtable-cell-70 Rtable-cell--green">
								<input type="text" id="id" class="form-control input-sm" value.bind="appService.currentRecord.inmate.gender">
							</div>

							<div class="Rtable-cell-30 Rtable-cell--green">
								<strong> inmate.DOB</strong>
							</div>
							<div class="Rtable-cell-70 Rtable-cell--green">
								<strong> inmate.DOB</strong>
								<input type="text" id="id" class="form-control input-sm" value.bind="appService.currentRecord.inmate.DOB">
							</div>


						</div>
					</div>


					<div class="form-group flex-column-1 margin-left-10">
						<div class="Rtable Rtable--2cols">
							<div class="Rtable-cell-30 Rtable-cell--green">
								<strong> inmate.gender</strong>
							</div>
							<div class="Rtable-cell-70 Rtable-cell--green">
								<input type="text" id="id" class="form-control input-sm" value.bind="appService.currentRecord.inmate.gender">
							</div>
						</div>
					</div>

				</div>

				<section class="docs full-height flex-column-1 overflow-y-auto ignore">
					<h2>
						<i class="fa fa-folder-open"></i> Notes (${currentItem.notes.length})
						<a slot="buttons-slot" class="btn btn-success" click.delegate="addNote()">
							<i class="fa fa-plus"></i> Add Note
						</a>
					</h2>

					<!-- <table class="table table-striped table-hover" > -->
					<table class="table-condensed table">
						<thead class="table-header-blue" data-sort="items.bind: appService.currentRecord.booking; cols: ['bookingDate','classification']">
							<tr>
								<tr>
									<th class="header">bookingDate
									</th>
									<th class="header">classification
									</th>
									<th class="header">bookingNo
									</th>
									<th class="header">prisonerId

									</th>
									<th class="header">sentencingDate

									</th>



									<th class="header">Cmd

									</th>
								</tr>
						</thead>
						<tfoot>
							<tr>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
							</tr>
						</tfoot>
						<tbody>
							<tr repeat.for="booking of appService.currentRecord.booking" with.bind="booking">
								<td width="125px">
									<span show.bind="!booking.edit">${bookingDate | dateFormat }</span>
									<input show.bind="booking.edit" class="form-control input-sm" disabled.bind="!booking.edit" type="date" value.bind="bookingDate">
								</td>
								<td width="325px">
									<span show.bind="!booking.edit">${classification}</span>

									<input show.bind="booking.edit" class="form-control input-sm" disabled.bind="!booking.edit" type="text" value.bind="bookingNo">									</td>

								<td width="225px">
									<td width="325px">
										<span show.bind="!booking.edit">${prisonerId}</span>

										<input show.bind="booking.edit" class="form-control input-sm" disabled.bind="!booking.edit" type="text" value.bind="prisonerId">										</td>
									<td width="125px">
										<span show.bind="!booking.edit">${sentencingDate| dateFormat }</span>
										<input show.bind="booking.edit" class="form-control input-sm" disabled.bind="!booking.edit" type="date" value.bind="sentencingDate">
									</td>
									<td width="225px">
										<button class="btn btn-primary" click.delegate="booking.edit=!booking.edit">${ !note.edit ? 'Update' : 'Done' }</button>
										<button class="btn btn-danger" click.delegate="remove(booking,$index)">Delete</button>

									</td>


						</tbody>
					</table>

				</section>



			</form>
			<div class="flex-column-none section-footer">
				<span>&nbsp;&nbsp;	
          	<button class="btn btn-sm btn-danger" click.delegate="saveinmate(0)">
							Save &amp; Stay
					</button>
					
		      <button class="btn btn-sm btn-danger" click.delegate="requestclose()">
                 Close
          </button>
        </span>
			</div>
		</div>
	</section>
</template>